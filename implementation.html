
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>The implementation exercise &#8212; Finite element course 2018.0 documentation</title>
    <link rel="stylesheet" href="_static/fenics.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/proof.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/proof.js"></script>
    <script async="async" type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="1. Numerical quadrature" href="1_quadrature.html" />
    <link rel="prev" title="Computational tools" href="tools.html" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

<link rel="stylesheet" href="_static/featured.css">


<link rel="shortcut icon" href="_static/icon.ico" />


  </head><body>
<div class="wrapper">
  <a href="index.html"><img src="_static/banner.png" width="900px" alt="FInAT Project Banner" /></a>
  <div id="access">
    <div class="menu">
      <ul>
          <li class="page_item"><a href="https://github.com/finite-element/finite-element-course" title="GitHub">GitHub</a></li>
      </ul>
    </div><!-- .menu -->
  </div><!-- #access -->
</div><!-- #wrapper -->


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-implementation-exercise">
<h1>The implementation exercise<a class="headerlink" href="#the-implementation-exercise" title="Permalink to this headline">¶</a></h1>
<p>The object of the implementation exercise is to gain an understanding
of the finite element method by producing a working one and two
dimensional finite element solver library. Along the way you will have
the opportunity to pick up valuable scientific computing skills in
coding, software engineering and rigorous testing.</p>
<p>There will be no conventional lectures for this part of the
module. Instead, there will be twice weekly 1 hour computer lab sessions
during the term. Some of this time will involve explanations at the
board, but much of the time will be an opportunity to develop your
finite element implementation and receive help on how to do so.</p>
<div class="section" id="formalities-and-marking-scheme">
<h2>Formalities and marking scheme<a class="headerlink" href="#formalities-and-marking-scheme" title="Permalink to this headline">¶</a></h2>
<p>The implementation exercise is due at the end of term. That is, by
1600 on Friday 22 March. You must submit your work uploading the git
commit code on Blackboard. You can convenently find this code on the
commits page for your repository on github. For the avoidance of
doubt, the commit you submit must date from before the deadline!</p>
<p>The marking scheme will be as follows:</p>
<dl class="docutils">
<dt>First/distinction (70-100)</dt>
<dd>All parts of the implementation are correct and all tests pass. The
code style is always very clear and the implementation of every
exercise is transparent and elegant.</dd>
<dt>Upper second/merit (60-70)</dt>
<dd>The implementation is correct but let down somewhat by poor coding
style. Alternatively, submissions which are correct and well
written up to and including solving the Helmholtz problem but
which do not include a correct solution to boundary conditions will
earn an upper second.</dd>
<dt>Lower second/pass (50-60)</dt>
<dd>There are significant failings in the implementation resulting in
many test failures, and/or the coding style is
sufficiently poor that the code is hard to understand.</dd>
<dt>Fail (0-50)</dt>
<dd>The implementation is substantially incomplete. Correct
implementations may have been provided for some of the earlier exercises but
the more advanced parts of the implementation exercise have not been
attempted or do not work.</dd>
</dl>
</div>
<div class="section" id="extension-mastery-exercise">
<h2>Extension (mastery) exercise<a class="headerlink" href="#extension-mastery-exercise" title="Permalink to this headline">¶</a></h2>
<p>Fourth year and masters students must also complete the mastery
exercise, which will be issued half way through the term. This will be
worth 20% of the implementation exercise marks and will be marked on
the same scheme as above.</p>
</div>
<div class="section" id="obtaining-the-skeleton-code">
<h2>Obtaining the skeleton code<a class="headerlink" href="#obtaining-the-skeleton-code" title="Permalink to this headline">¶</a></h2>
<p>This section assumes you’ve already done the <a class="reference internal" href="tools.html#bitbucket-git"><span class="std std-ref">Git tutorial</span></a>.</p>
<div class="section" id="setting-up-your-repository">
<h3>Setting up your repository<a class="headerlink" href="#setting-up-your-repository" title="Permalink to this headline">¶</a></h3>
<p>We’re using a tool called <a class="reference external" href="https://classroom.github.com">GitHub classroom</a> to automate the creation of your
copies of the repository. To create your repository, <a class="reference external" href="https://classroom.github.com/a/p7YGdXBw">click here</a>.</p>
</div>
<div class="section" id="cloning-a-local-copy">
<h3>Cloning a local copy<a class="headerlink" href="#cloning-a-local-copy" title="Permalink to this headline">¶</a></h3>
<p>At the command line on your working machine type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="o">&lt;</span><span class="n">url</span><span class="o">&gt;</span> <span class="n">finite</span><span class="o">-</span><span class="n">element</span><span class="o">-</span><span class="n">course</span>
</pre></div>
</div>
<p>Substituting your git repository url for &lt;url&gt;. Your git repository
url can be found by clicking on <cite>clone or download</cite> at the top right of your repository page on GitHub.</p>
</div>
<div class="section" id="setting-up-your-venv">
<h3>Setting up your venv<a class="headerlink" href="#setting-up-your-venv" title="Permalink to this headline">¶</a></h3>
<p>We’re going to use a Python venv. This is a private Python environment
in which we’ll install the packages we need, including our own
implementation exercise. This minimises interference between this
project and anything else which might be using Python on the
system. We can run a script from the git repository to make the venv:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">finite</span><span class="o">-</span><span class="n">element</span><span class="o">-</span><span class="n">course</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">fe_install_venv</span> <span class="n">venv</span>
</pre></div>
</div>
<p>This has to install several packages in the venv, so it might take a
few minutes to run.</p>
<p>On Windows, the set of commands is somewhat different. In this case
you would run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">finite</span><span class="o">-</span><span class="n">element</span><span class="o">-</span><span class="n">course</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">fe_install_venv_win</span> <span class="n">venv</span>
</pre></div>
</div>
</div>
<div class="section" id="activating-your-venv">
<h3>Activating your venv<a class="headerlink" href="#activating-your-venv" title="Permalink to this headline">¶</a></h3>
<p><strong>Every time</strong> you want to work on the implementation exercise, you need
to activate the venv. On Linux or Mac do this with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">venv</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
</pre></div>
</div>
<p>while on Windows the command is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">venv</span><span class="o">/</span><span class="n">Scripts</span><span class="o">/</span><span class="n">activate</span>
</pre></div>
</div>
<p>Obviously if you are typing this in a directory other than the one
containing the venv, you need to modify the path accordingly.</p>
</div>
<div class="section" id="setting-up-an-implementation-branch">
<h3>Setting up an implementation branch<a class="headerlink" href="#setting-up-an-implementation-branch" title="Permalink to this headline">¶</a></h3>
<p>We’ll keep the master branch of your repository in the original
condition so we can compare to it later, and collect any updates which
occur during the term. Instead, we’ll create an implementation branch
to actually work on:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">finite</span><span class="o">-</span><span class="n">element</span><span class="o">-</span><span class="n">course</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="n">implementation</span>
</pre></div>
</div>
<p>Your working directory is now a current checkout of your
implementation branch. You’ll also want to push this branch to GitHub:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">push</span> <span class="o">--</span><span class="nb">set</span><span class="o">-</span><span class="n">upstream</span> <span class="n">origin</span> <span class="n">implementation</span>
</pre></div>
</div>
</div>
<div class="section" id="watching-for-updates-and-issues">
<h3>Watching for updates and issues<a class="headerlink" href="#watching-for-updates-and-issues" title="Permalink to this headline">¶</a></h3>
<p>You should make sure you are notified of all updates on the main
repository and all issues anyone raises. For this, you should navigate
to <a class="reference external" href="https://github.com/finite-element/finite-element-course">the main repository</a>. On the
top right there is an eye icon. Select the drop-down box and switch to
<code class="docutils literal notranslate"><span class="pre">watching</span></code>.</p>
</div>
<div class="section" id="updating-your-fork">
<h3>Updating your fork<a class="headerlink" href="#updating-your-fork" title="Permalink to this headline">¶</a></h3>
<p>When you see that the main repository has been updated, you’ll need to
update your repository to incorporate those changes. <em>Just this once</em>,
you need to tell your local git repo about the main repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">remote</span> <span class="n">add</span> <span class="n">upstream</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">finite</span><span class="o">-</span><span class="n">element</span><span class="o">/</span><span class="n">finite</span><span class="o">-</span><span class="n">element</span><span class="o">-</span><span class="n">course</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>Now, <em>every time</em> you want to update you do the following:</p>
<ol class="arabic">
<li><p class="first">Make sure you have commited all your local changes <strong>and</strong> pushed
them to GitHub.</p>
</li>
<li><p class="first">Execute the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">master</span>          <span class="c1"># Switch to the master branch.</span>
<span class="n">git</span> <span class="n">pull</span> <span class="n">upstream</span> <span class="n">master</span>     <span class="c1"># Update from the main repository.</span>
<span class="n">git</span> <span class="n">push</span>                     <span class="c1"># Push the updated master branch to GitHub.</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">implementation</span>  <span class="c1"># Switch back to the implementation branch.</span>
<span class="n">git</span> <span class="n">merge</span> <span class="n">master</span>             <span class="c1"># Merge the new changes from master into implementation.</span>
<span class="n">git</span> <span class="n">push</span>                     <span class="c1"># Push the updated implementation branch to GitHub.</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="skeleton-code-documentation">
<h2>Skeleton code documentation<a class="headerlink" href="#skeleton-code-documentation" title="Permalink to this headline">¶</a></h2>
<p>There is web documentation for the complete <a class="reference internal" href="fe_utils.html"><span class="doc">fe_utils package</span></a>. There is
also an <a class="reference internal" href="genindex.html"><span class="std std-ref">alphabetical index</span></a> and a <a class="reference internal" href="search.html"><span class="std std-ref">search page</span></a>.</p>
</div>
<div class="section" id="how-to-do-the-implementation-exercises">
<h2>How to do the implementation exercises<a class="headerlink" href="#how-to-do-the-implementation-exercises" title="Permalink to this headline">¶</a></h2>
<p>The implementation exercises build up a finite element library from
its component parts. Quite a lot of the coding infrastructure you will
need is provided already. Your task is to write the crucial
mathematical operations at key points. The mathematical operations
required are described on this website, interspersed with exercises
which require you to implement and test parts of the mathematics.</p>
<p>The code on which you will build is in the <code class="docutils literal notranslate"><span class="pre">fe_utils</span></code> directory of
your repository. The code has embedded documentation which is used to
build the <a class="reference internal" href="fe_utils.html"><span class="doc">fe_utils package</span></a> web documentation.</p>
<p>As you do the exercises, <strong>commit your code</strong> to your repository. This
will build up your finite element library. You should commit code
early and often - small commits are easier to understand and debug
than large ones. <strong>Never</strong> commit back to the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch of your
fork, that should always remain a clean copy of the main repository.</p>
</div>
<div class="section" id="pull-requests-for-feedback">
<h2>Pull requests for feedback<a class="headerlink" href="#pull-requests-for-feedback" title="Permalink to this headline">¶</a></h2>
<p>There will be a formal opportunity to recieve feedback on your code
progress twice during the term. To take part, you should set up a pull
request from your <code class="docutils literal notranslate"><span class="pre">implementation</span></code> branch to the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch
of your repository. This will enable the lecturer to write line by
line comments on your code.</p>
<div class="section" id="creating-your-pull-request">
<h3>Creating your pull request<a class="headerlink" href="#creating-your-pull-request" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Click on the <code class="docutils literal notranslate"><span class="pre">New</span> <span class="pre">pull</span> <span class="pre">request</span></code> button at the top of your
repository page on GitHub.</li>
<li>Make sure <strong>left</strong> dropdown box (“base”) is set to <code class="docutils literal notranslate"><span class="pre">master</span></code>.</li>
<li>Make sure <strong>right</strong> dropdown box (“compare”) is set to <code class="docutils literal notranslate"><span class="pre">implementation</span></code>.</li>
<li>Type a suitable title in the title box. For example
<code class="docutils literal notranslate"><span class="pre">Request</span> <span class="pre">for</span> <span class="pre">feedback</span> <span class="pre">30/1/19</span></code>.</li>
<li>If you have any comments you would like to pass on to the lecturer
(for example questions about how you should have done a particular
exercise) then type these in the <code class="docutils literal notranslate"><span class="pre">Description</span></code> box.</li>
<li>Click <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">pull</span> <span class="pre">request</span></code>.</li>
</ol>
</div>
</div>
<div class="section" id="testing-your-work">
<h2>Testing your work<a class="headerlink" href="#testing-your-work" title="Permalink to this headline">¶</a></h2>
<p>As you complete the exercises, there will often be test scripts which
exercise the code you have just written. These are located in the
<code class="docutils literal notranslate"><span class="pre">test</span></code> directory and employ the <a class="reference external" href="http://pytest.org/">pytest</a>
testing framework. You run the tests with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">py</span><span class="o">.</span><span class="n">test</span> <span class="n">test_script</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>from the bash command line, replacing <code class="docutils literal notranslate"><span class="pre">test_script.py</span></code> with the appropriate
test file name. The <code class="docutils literal notranslate"><span class="pre">-x</span></code> option to <code class="docutils literal notranslate"><span class="pre">py.test</span></code> will cause the test
to stop at the first failure it finds, which is often the best place
to start fixing a problem. For those familiar with debuggers, the
<code class="docutils literal notranslate"><span class="pre">--pdb</span></code> option will drop you into the Python debugger at the first
error.</p>
<p>You can also run all the tests by running <code class="docutils literal notranslate"><span class="pre">py.test</span></code> on the tests
directory. This works particularly well with the -x option, resulting
in the tests being run in course order and stopping at the first
failing test:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">py</span><span class="o">.</span><span class="n">test</span> <span class="o">-</span><span class="n">x</span> <span class="n">tests</span><span class="o">/</span>
</pre></div>
</div>
</div>
<div class="section" id="coding-style-and-commenting">
<h2>Coding style and commenting<a class="headerlink" href="#coding-style-and-commenting" title="Permalink to this headline">¶</a></h2>
<p>Computer code is not just functional, it also conveys information to
the reader. It is important to write clear, intelligible code. <strong>The
readability and clarity of your code will count for marks</strong>.</p>
<p>The Python community has agreed standards for coding, which are
documented in <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP8</a>. There are programs and
editor modes which can help you with this. The skeleton implementation
follows PEP8 quite closely. You are encouraged, especially if you are
a more experienced programmer, to follow PEP8 in your
implementation. However nobody is going to lose marks for PEP8
failures.</p>
</div>
<div class="section" id="tips-and-tricks-for-the-implementation-exercise">
<h2>Tips and tricks for the implementation exercise<a class="headerlink" href="#tips-and-tricks-for-the-implementation-exercise" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Work from the documentation.</dt>
<dd>The notes, and particularly the exercise specifications, contain
important information about how and what to implement. If you just
read the source code then you will miss out on important
information.</dd>
<dt>Read the hints</dt>
<dd>The pink sections in the notes starting with a lightbulb are
hints. Usually they contain suggestions about how to go about
writing your answer, or suggest Python functions which you might
find useful.</dd>
<dt>Don’t forget the 1D case</dt>
<dd>Your finite element library needs to work in one and two dimensions.</dd>
<dt>Return a <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v1.15)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array()</span></code></a></dt>
<dd>Many of the functions you have to write return arrays. Make sure
you actually return an array and not a list (it’s usually fine to
build the answer as a list, but convert it to an array before you
return it).</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014-2018, David A. Ham and Colin J. Cotter.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.3.
    </div>
  </body>
</html>